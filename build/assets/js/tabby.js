!function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.tabby=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var e={},o="querySelector"in document&&"addEventListener"in t&&"classList"in document.createElement("_")&&"onhashchange"in t,n,a,r={selectorToggle:"[data-tab]",selectorToggleGroup:"[data-tabs]",selectorContent:"[data-tabs-pane]",selectorContentGroup:"[data-tabs-content]",toggleActiveClass:"active",contentActiveClass:"active",initClass:"js-tabby",stopVideo:!0,callback:function(){}},c=function(t,e,o){if("[object Object]"===Object.prototype.toString.call(t))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(o,t[n],n,t);else for(var a=0,r=t.length;a<r;a++)e.call(o,t[a],a,t)},s=function(){var t={},e=!1,o=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],o++);for(var a=function(o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e&&"[object Object]"===Object.prototype.toString.call(o[n])?t[n]=s(!0,t[n],o[n]):t[n]=o[n])};o<n;o++){a(arguments[o])}return t},i=function(t,e){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),o=e.length;--o>=0&&e.item(o)!==this;);return o>-1});t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null},l=function(t){"#"===t.charAt(0)&&(t=t.substr(1));for(var e=String(t),o=e.length,n=-1,a,r="",c=e.charCodeAt(0);++n<o;){if(0===(a=e.charCodeAt(n)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");a>=1&&a<=31||127==a||0===n&&a>=48&&a<=57||1===n&&a>=48&&a<=57&&45===c?r+="\\"+a.toString(16)+" ":r+=a>=128||45===a||95===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?e.charAt(n):"\\"+e.charAt(n)}return"#"+r},u=function(t,e){if(e.stopVideo&&!t.classList.contains(e.contentActiveClass)){var o=t.querySelector("iframe"),n=t.querySelector("video");if(o){var a=o.src;o.src=a}n&&n.pause()}},d=function(e,o){if(!e.hasAttribute("data-tab-no-focus")){if(!e.classList.contains(o.contentActiveClass))return void(e.hasAttribute("data-tab-focused")&&e.removeAttribute("tabindex"));var n={x:t.pageXOffset,y:t.pageYOffset};e.focus(),document.activeElement.id!==e.id&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tab-focused",!0),e.focus()),t.scrollTo(n.x,n.y)}},f=function(t,e){var o=i(t,e.selectorToggleGroup);if(o){var n=o.querySelectorAll(e.selectorToggle),a;c(n,function(o){if(o.hash===t.hash)return o.classList.add(e.toggleActiveClass),void((a=i(o,"li"))&&a.classList.add(e.toggleActiveClass));o.classList.remove(e.toggleActiveClass),(a=i(o,"li"))&&a.classList.remove(e.toggleActiveClass)})}},v=function(t,e){var o=document.querySelector(l(t));if(o){var n=i(o,e.selectorContentGroup);if(n){var a=n.querySelectorAll(e.selectorContent);c(a,function(o){if(o.id===t.substring(1))return o.classList.add(e.contentActiveClass),void d(o,e);o.classList.remove(e.contentActiveClass),u(o,e),d(o,e)})}}};e.toggleTab=function(t,e,o){var a=s(n||r,o||{}),c=document.querySelectorAll(l(t));v(t,a),e&&f(e,a),a.callback(c,e)};var h=function(o){var r=t.location.hash;if(a&&(a.id=a.getAttribute("data-tab-id"),a=null),r){var c=document.querySelector(n.selectorToggle+'[href*="'+r+'"]');e.toggleTab(r,c)}},b=function(e){if(0===e.button&&!e.metaKey&&!e.ctrlKey){var o=i(e.target,n.selectorToggle);if(o&&o.hash){if(o.hash===t.location.hash)return void e.preventDefault();a=document.querySelector(o.hash),a&&(a.setAttribute("data-tab-id",a.id),a.id="")}}},m=function(t){if((a=i(t.target,n.selectorContent))&&!a.classList.contains(n.contentActiveClass)){var e=a.id;a.setAttribute("data-tab-id",e),a.setAttribute("data-tab-no-focus",!0),a.id="",location.hash=e}};return e.destroy=function(){n&&(document.documentElement.classList.remove(n.initClass),document.removeEventListener("click",b,!1),document.removeEventListener("focus",m,!0),t.removeEventListener("hashchange",h,!1),n=null,a=null)},e.init=function(a){o&&(e.destroy(),n=s(r,a||{}),document.documentElement.classList.add(n.initClass),document.addEventListener("click",b,!1),document.addEventListener("focus",m,!0),t.addEventListener("hashchange",h,!1),h())},e});